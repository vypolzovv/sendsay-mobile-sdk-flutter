---
title: Data flushing
excerpt: Learn how the Flutter SDK uploads data to the Sendsay API and how to customize this behavior
slug: flutter-sdk-data-flushing
categorySlug: integrations
parentDocSlug: flutter-sdk-setup
---

## Отправка данных

SDK кэширует данные (сессии, события, свойства клиентов и т.д.) во внутренней базе данных и периодически отправляет их в CDP Sendsay. После успешной отправки данные обновляют значения в базе аккаунта, а затем удаляются из кэша SDK. Этот процесс называется **отправкой данных**.

По умолчанию SDK отправляет данные сразу после их отслеживания или при переходе приложения в фоновый режим. Поведение можно изменить, настроив [режим отправки](#режимы-отправки).

Вы можете полностью отключить автоматическую отправку. В этом случае данные нужно [передавать вручную](#ручная-отправка) — каждый раз, когда они накопились и готовы к отправке.

SDK отправляет данные только при наличии стабильного интернет-соединения. Если во время отправки произошла ошибка, данные останутся в кэше и будут отправлены позже — как только соединение восстановится.

## Режимы отправки

SDK поддерживает четыре режима, определяющих частоту и способ отправки данных.

Подробнее — в [`/lib/src/data/model/flush_mode.dart`](https://github.com/sendsay-ru/sendsay-mobile-sdk-flutter/blob/main/lib/src/data/model/flush_mode.dart)

| Название                            | Описание |
| ------------------------------ - | ----------- |
| `FlushMode.immediate` (по умолчанию) | Отправляет все данные сразу после их получения. |
| `FlushMode.period`              | Отправляет данные с интервалом, указанным с помощью `setFlushPeriod(Duration)`, а также при закрытии  или переходе приложения в фоновый режим. |
| `FlushMode.appClose`            | Отправляет данные при потере активного состояния приложения. |
| `FlushMode.manual`              | Полностью отключает автоматическую отправку. Отправку необходимо выполнять [вручную](#ручная-отправка). |

Чтобы изменить режим, сначала [инициализируйте SDK](../docs/setup.md), а затем вызовите метод `setFlushMode()` с желаемым режимом в качестве параметра:

```dart
SendsayPlugin().setFlushMode(FlushMode.manual);
```

При использовании режима выгрузки `FlushMode.period` интервал по умолчанию составляет **60 минут**. Чтобы указать другой интервал, вызовите метод `setFlushPeriod()` с параметром `Duration`:

```dart
SendsayPlugin().setFlushMode(FlushMode.period);
final period = Duration(minutes: 5);
SendsayPlugin().setFlushPeriod(period);
```

## Ручная отправка

Чтобы вручную отправить накопленные данные, вызовите:

```dart
SendsayPlugin().flushData();
```
